<header class="hero-unit" id="banner">
  <div class="container primary">
    <img src="assets/images/ThePartyHero.jpg" class="partyHero floatLeft" alt="The Party Hero!">
    <img src="assets/images/ThePartyHero.jpg" class="partyHero floatRight" alt="The Party Hero!">
    <h1 class="logoHeader">
    <h1>
    Party Hero!
      <h3>
        <form id="formid" action="/getSong" method='get'>
          <p class="lead">To play a song, enter the song name and artist:</p>
          <center><p><input type="text" style="color:black" name="song" placeholder="Song Name?"></p></center>

          <center><p><input type="text" style="color:black" name="artist" placeholder="Artist Name?"></p></center>

          <center><input type="submit" style="color:white;background-color:black" value="Add to queue!"></center>
        </form>
      </h3>
    </h1>

<br>
  </div>
</header>

<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">Features:</h1>
	  <audio id="song" controls autoplay="true">
		   <source id="song_src" src="https://p.scdn.co/mp3-preview/8c72d825c13c32ca690fc28d379db91a41092e7a" type="audio/mpeg">
		   Your browser does not support the audio element.
	   </audio>
      <ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="thing in $ctrl.awesomeThings">
       <!-- <li><a href="#" uib-tooltip="{{thing.info}}">{{thing.name}}</a></li>-->

      </ul>
    </div>
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){
  $('#formid').submit(function(event) {
    event.preventDefault(); // Prevent the form from submitting via the browser
    var form = $(this);
    $.ajax({
      type: form.attr('method'),
      url: form.attr('action'),
      data: form.serialize()
    }).done(function(data) {
      console.log(data);
    }).fail(function(data) {
      // Optionally alert the user of an error here...
    });
  });
 });

setInterval(getNextSong, 32000);
function getNextSong() {
 	//console.log("we did it!");
	$.ajax({
      type: "get",
      url: "/playSong"
    }).done(function(data) {
      console.log(data);
	 $("#song_src").attr('src',data.mp3);
	 $('#song').get(0).pause();
	 $('#song').get(0).load();//suspends and restores all audio element
	 $('#song').get(0).play();

    }).fail(function(data) {
      // Optionally alert the user of an error here...
    });
 }
</script>
